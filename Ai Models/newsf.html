<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsF | Neural Alpha</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-deep: #020205; --neon-cyan: #00f2ff; --glass: rgba(255, 255, 255, 0.03);
            --card-border: rgba(255, 255, 255, 0.1); --font-prime: 'Outfit', sans-serif;
        }
        body { background: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #020205 100%); color: #e0e0e0; font-family: var(--font-prime); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sidebar */
        .sidebar { width: 90px; background: rgba(0,0,0,0.4); backdrop-filter: blur(20px); border-right: 1px solid var(--card-border); display: flex; flex-direction: column; align-items: center; padding: 40px 0; gap: 50px; }
        .logo-box { font-weight: 800; font-size: 1.5rem; color: var(--neon-cyan); text-shadow: 0 0 15px var(--neon-cyan); }
        
        /* Main Layout */
        .content-area { flex: 1; padding: 50px; overflow-y: auto; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 60px; }
        .headline-main { font-size: 3.5rem; font-weight: 800; letter-spacing: -3px; margin: 0; }
        .search-box { background: var(--glass); border: 1px solid var(--card-border); padding: 15px 30px; border-radius: 20px; width: 450px; display: flex; align-items: center; gap: 15px; }
        input { background: none; border: none; color: white; width: 100%; outline: none; font-size: 1.1rem; }

        /* News Cards */
        .news-flow { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 30px; }
        .news-card { background: var(--glass); border: 1px solid var(--card-border); border-radius: 35px; padding: 30px; cursor: pointer; transition: 0.4s; animation: slideUp 0.6s ease-out backwards; }
        .news-card:hover { transform: translateY(-10px); border-color: var(--neon-cyan); background: rgba(255,255,255,0.05); }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .status-pill { display: inline-block; padding: 6px 15px; border-radius: 100px; font-size: 0.75rem; font-weight: 700; margin-bottom: 15px; }
        .pill-bullish { background: rgba(0, 255, 136, 0.1); color: #00ff88; border: 1px solid #00ff88; }
        .pill-bearish { background: rgba(255, 51, 102, 0.1); color: #ff3366; border: 1px solid #ff3366; }
        .news-title { font-size: 1.4rem; font-weight: 600; margin-bottom: 15px; }

        /* Modal: The Deep Dive */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .modal-content { background: #0a0a0b; border: 1px solid var(--neon-cyan); border-radius: 30px; width: 70%; padding: 50px; position: relative; }
        .close-btn { position: absolute; top: 20px; right: 30px; font-size: 2rem; cursor: pointer; }
        .analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .metric-card { background: #111; padding: 25px; border-radius: 20px; border-left: 5px solid var(--neon-cyan); }
        .metric-card h4 { margin: 0; color: #666; font-size: 0.8rem; text-transform: uppercase; }
        .metric-card p { font-size: 1.8rem; font-weight: 800; margin: 10px 0 0 0; color: #fff; }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo-box">NF</div>
        <div class="nav-link active"><i data-lucide="layout-grid"></i></div>
    </aside>

    <main class="content-area">
        <div class="top-bar">
            <h1 class="headline-main">NewsF Alpha</h1>
            <div class="search-box">
                <i data-lucide="search"></i>
                <input type="text" placeholder="Enter Ticker (RELIANCE.NS, TSLA)...">
            </div>
        </div>
        <div class="news-flow"></div>
    </main>

    <div id="diveModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modalTicker" style="color:var(--neon-cyan); margin:0;">--</h2>
            <p id="modalTitle" style="font-size: 1.2rem; opacity: 0.7;">--</p>
            <div class="analytics-grid">
                <div class="metric-card"><h4>Liquidity (Vol)</h4><p id="m-liq">--</p></div>
                <div class="metric-card"><h4>Institutional</h4><p id="m-inst">--</p></div>
                <div class="metric-card"><h4>Risk Rating</h4><p id="m-risk">--</p></div>
                <div class="metric-card"><h4>Value Status</h4><p id="m-val">--</p></div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        const flow = document.querySelector('.news-flow');

        async function updateNewsF(ticker) {
            flow.innerHTML = '<p>Accessing Neural Pathways...</p>';
            try {
                const res = await fetch(`http://127.0.0.1:8000/news/${ticker}`);
                const data = await res.json();
                flow.innerHTML = '';
                data.feed.forEach((item, i) => {
                    const pill = item.sentiment === 'POSITIVE' ? 'pill-bullish' : 'pill-bearish';
                    flow.innerHTML += `
                        <div class="news-card" style="animation-delay:${i*0.1}s" onclick="openDive('${ticker}', '${item.title}')">
                            <div class="status-pill ${pill}">${item.sentiment} ${item.confidence}%</div>
                            <div class="news-title">${item.title}</div>
                            <div class="impact-analysis"><strong>Impact:</strong> ${item.impact}<br><strong>Desi:</strong> ${item.desi}</div>
                        </div>`;
                });
            } catch (e) { flow.innerHTML = '<p style="color:red">Backend Offline. Run app.py</p>'; }
        }

        async function openDive(ticker, title) {
            document.getElementById('diveModal').style.display = 'flex';
            document.getElementById('modalTicker').innerText = ticker + " TERMINAL";
            document.getElementById('modalTitle').innerText = title;
            const res = await fetch(`http://127.0.0.1:8000/deep-dive/${ticker}`);
            const d = await res.json();
            document.getElementById('m-liq').innerText = d.liq;
            document.getElementById('m-inst').innerText = d.inst;
            document.getElementById('m-risk').innerText = d.risk;
            document.getElementById('m-val').innerText = d.val;
        }

        function closeModal() { document.getElementById('diveModal').style.display = 'none'; }

        document.querySelector('input').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') updateNewsF(e.target.value.toUpperCase());
        });
    </script>
</body>
</html>